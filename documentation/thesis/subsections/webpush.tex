\section{Web Push API}

Az alkalmazásban szeretnénk, hogyha az étterem kapna valamilyen értesítést arról, amint új rendelés érkezik be. Ehhez hasonlóan a kliens pedig kapjon valamilyen vizuálisan megjelenő visszajelzést a felhasználói felületen, ha az étterem feldolgozta a rendelést, vagy a rendelés elkészült. Amennyiben pedig a felhasználók fizetni szeretnének, ezen szándékukat tudják jelezni oly módon, hogy az étterem azonnal értesüljön erről, és a tranzakció lebonyolításához szükséges minden információ rendelkezésükre álljon. \par

Ezen probléma megoldására valamilyen alkalmazáson belüli eseménykezelő rendszert kell létrehoznunk, ami alkalmas előre meghatározott üzenettípusok küldésére, ezekre való feliratkozásra (azaz bejövő üzenetek figyelésére), illetve ezen üzenetek kezelésére. Létrehoztunk egy sugárzó-feliratkozó (angolul \emph{broadcaster-subscriber}) alapú event kezelő rendszert, ahol a feliratkozók egy callback megadásával képesek feliratkozni eventekre, a sugárzók pedig a kód bármely pontjából képesek eventeket sugározni, az event értelmezéséhez szükséges minden információval együtt. \par

Mivel ezek az eventek a szerveren jönnek létre, de hatásukat a klienseknél, azaz a felhasználói felületen fejtik ki, ezért megoldást kell találnunk arra, hogyan teremtsünk gyors kommunikációt a kettő között. Egy lehetséges megoldás a kliens oldali poll-ozás lenne. A kliens előre meghatározott időközönként kérést indít a szerver felé valamilyen információért, például hogy feldolgozásra került-e egy rendelés, vagy elkészült-e, és a szervertől kapott válasz alapján cselekszik.

A probléma ezzel a megoldással, hogy nem hatékony. Amennyiben túl hosszú a kérés újraküldésének ideje, a kliens unreszponzívnak tűnhet, lassan reagál a szerver oldali változásokra. Amennyiben pedig ezen időintervallum túl rövid, a szerverünknek túl sok kérést kell kezelnie, és ezen kérések egy része "felesleges", hiszen nem történt állapotváltozás az előző kérés feldolgozása óta. Továbbá függetlenül attól, hogy milyen gyakran poll-ozunk, ez a folyamat jelentős hálózati forgalmat fog generálni és amennyiben a kapcsolat nem megfelelő erősségű, ez jelentősen ronthatja a felhasználói élményt és az alkalmazás hatékonyságát. \par

A megoldás abban rejlik, hogy a szerveren létrejövő változásokról (például egy rendelés állapota megváltozott) értesítést küldünk a klienseknek, akik ezt az értesítést fogadják és kezelik. Ezen rendszer létrehozásában a Vaadin által szolgáltatott \emph{Push} funkcióra hagyatkoztunk, ami a \emph{Push API}-on alapszik. \par

A Push API a W3C által előterjesztett megoldás \cite{Beverloo:22:PA}, ami üzenetek küldését teszi lehetővé egy szerverről, még akkor is, amikor a fogadó fél, jellemzően egy web alkalmazás vagy felhasználói ágens inaktív. Ez a megoldás hatékonyan és megbízhatóan kézbesíti a küldött adatokat. A transzportációs folyamat technikai háttere az RFC 8030-ban definiált \emph{web push protocol}ra épül. A protokoll célzottan a valós idejű eventek hatékony, erőforráskímélő transzportációjára lett megalkotva \cite{RFC8030}.